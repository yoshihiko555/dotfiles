# ~/.codex/config.toml

# ---- 基本設定 ----
# デフォルトで使うモデル
model = "gpt-5.3-codex"

# 推論の深さ（medium: バランス型 / high: より時間をかける）
model_reasoning_effort = "xhigh"

# Web 検索の動作（"live" / "cached" / "disabled"）
web_search = "live"

# ---- 実行ポリシー ----
# コマンド実行時の確認ポリシー
# - "untrusted": コマンド実行前に基本的に確認する
# - "on-request": 必要なときだけ確認
# - "on-failure": 失敗時に確認
approval_policy = "on-request"

# サンドボックスレベル
# - "workspace-write": 作業ディレクトリ内は書き込みOK、外は制限
sandbox_mode = "workspace-write"

# ---- 通知 ----
# 通知の設定（$HOME 展開のため bash -lc 経由で実行）
notify = ["bash", "-lc", "$HOME/.codex/codex_message.sh \"$0\""]

# ---- 警告表示 ----
# 開発中機能の警告を抑制
suppress_unstable_features_warning = true

# ---- 出力トーン ----
personality = "pragmatic"

# ---- 信頼済みプロジェクト ----
# 現行形式: [projects."/absolute/path"] + trust_level = "trusted" | "untrusted"
# BEGIN managed-trust-projects
# trust add/rm で自動更新
[projects."/Users/yoshihiko/ghq/github.com/yoshihiko555/ai-valification"]
trust_level = "trusted"

[projects."/Users/yoshihiko/ghq/github.com/yoshihiko555/dotfiles"]
trust_level = "trusted"

[projects."/Users/yoshihiko/ghq/github.com/yoshihiko555/learno/dev"]
trust_level = "trusted"

# END managed-trust-projects

[features]
# apply_patch ベースの柔軟な編集ツール（ベータ）
apply_patch_freeform = true
# プランモードが使えるやつ
collaboration_modes = true

# ---- MCP 方針 ----
# デフォルトは無効化し、必要なセッション/プロジェクトだけ有効化する。
# 例:
#   codex -c mcp_servers.context7.enabled=true
#   codex -c mcp_servers.notion.enabled=true
#   codex -c mcp_servers.context7.enabled=true -c mcp_servers.notion.enabled=true
[mcp_servers.context7]
command = "npx"
args = ["-y", "@upstash/context7-mcp"]
enabled = false
# 最小権限: Context7 は必要なツールだけ許可
enabled_tools = ["resolve-library-id", "query-docs"]

[mcp_servers.notion]
command = "npx"
args    =  ["-y", "mcp-remote", "https://mcp.notion.com/mcp"]
enabled = false

[notice]
hide_full_access_warning = true

[notice.model_migrations]
"gpt-5.1-codex-max" = "gpt-5.2-codex"
"gpt-5.2" = "gpt-5.2-codex"

[tui]
status_line = ["model-name", "project-root", "git-branch", "context-remaining", "context-used", "five-hour-limit"]
