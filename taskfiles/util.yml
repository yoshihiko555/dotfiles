version: "3"

tasks:
  # ====================
  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  # ====================
  status:
    desc: ãƒªãƒ³ã‚¯é©ç”¨å¾Œã‚„ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã«ç¾åœ¨ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯çŠ¶æ…‹ã‚’ç¢ºèª
    cmds:
      - |
        echo "ğŸ“ Shell:"
        ls -la ~/.zshrc ~/.zprofile 2>/dev/null || echo "  (not linked)"
        echo ""
        echo "ğŸ“ Config:"
        ls -la ~/.config/wezterm ~/.config/starship ~/.config/mise ~/.config/sheldon 2>/dev/null || echo "  (not linked)"
        echo ""
        echo "ğŸ“ Claude:"
        ls -la ~/.claude 2>/dev/null || echo "  (not linked)"
        echo ""
        echo "ğŸ“ Codex:"
        ls -la ~/.codex 2>/dev/null || echo "  (not linked)"
        echo ""
        echo "ğŸ“ Tmux:"
        ls -la ~/.tmux.conf 2>/dev/null || echo "  (not linked)"
        echo ""
        echo "ğŸ“ Alfred:"
        ls -la ~/Dropbox/02_Private/08_Settings/02_Alfred/Alfred.alfredpreferences/workflows/user.workflow.C9692AD7-2800-42B7-8F97-8F8CCD1CC88E 2>/dev/null || echo "  (not linked)"

  brew:
    desc: æ–°ã—ã„ Mac ã®åˆæœŸæ§‹ç¯‰æ™‚ã« Homebrew ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    cmds:
      - bash {{.ROOT_DIR}}/scripts/install-brew.sh
      - brew bundle --file={{.ROOT_DIR}}/Brewfile

  edit:
    desc: dotfiles ã‚’ç·¨é›†ã—ãŸã„ã¨ãã« VS Code ã§é–‹ã
    cmds:
      - code {{.ROOT_DIR}}

  mcp-init:
    desc: æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ã«æœ€å°æ§‹æˆã® .mcp.json ã‚’ä½œæˆï¼ˆMCP ãªã—ï¼‰
    cmds:
      - |
        if [ -f .mcp.json ]; then
          echo "âš ï¸  .mcp.json already exists. Use 'task mcp-show' to view template."
        else
          cp {{.ROOT_DIR}}/shared/mcp.template.json .mcp.json
          echo "âœ… .mcp.json (minimal) created. Edit as needed."
        fi

  mcp-show:
    desc: mcp-init ç”¨ï¼ˆæœ€å°æ§‹æˆï¼‰MCP ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…å®¹ã‚’ç¢ºèª
    cmds:
      - cat {{.ROOT_DIR}}/shared/mcp.template.json

  clean-claude:
    desc: Claude Code ã®ãƒ­ã‚°å®¹é‡ã‚’æ¸›ã‚‰ã—ãŸã„ã¨ãã«ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’å‰Šé™¤
    cmds:
      - bash {{.ROOT_DIR}}/scripts/clean-claude.sh

  clean-claude-dry:
    desc: clean-claude å®Ÿè¡Œå‰ã«å‰Šé™¤å¯¾è±¡ã ã‘ç¢ºèªã™ã‚‹ dry-run
    cmds:
      - bash {{.ROOT_DIR}}/scripts/clean-claude.sh --dry-run

  codex-trust-audit:
    desc: Codex ã®ä¿¡é ¼æ¸ˆã¿ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚’æ£šå¸ã—ã—ã¦ stale è¨­å®šã‚’æ¤œçŸ¥
    cmds:
      - bash {{.ROOT_DIR}}/scripts/codex-trust-audit.sh
