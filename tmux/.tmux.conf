# ====================
# 基本設定
# ====================

# デフォルトシェルを zsh に
set -g default-shell /bin/zsh

# 256色対応
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# プレフィックスキーを Ctrl+t に変更
set -g prefix C-t
unbind C-b
bind C-t send-prefix

# エスケープキーの遅延を短縮（Vim/Neovim 向け）
set -sg escape-time 10

# ヒストリ上限
set -g history-limit 10000

# ウィンドウ番号を 1 から開始
set -g base-index 1

# ペイン番号を 1 から開始
setw -g pane-base-index 1

# ウィンドウを閉じたとき番号を詰める
set -g renumber-windows on

# マウス操作を有効化
set -g mouse on

# ウィンドウ名を自動でカレントディレクトリ名にする
set -g automatic-rename on
set -g automatic-rename-format '#{b:pane_current_path}'

# ====================
# キーバインド
# ====================

# ペイン分割（WezTerm の Leader+d / Leader+/ に合わせる）
bind d split-window -v -c "#{pane_current_path}"
bind / split-window -h -c "#{pane_current_path}"

# 新しいウィンドウをカレントディレクトリで開く
bind c new-window -c "#{pane_current_path}"

# ペイン移動を Vim 風に（WezTerm の Leader+h/j/k/l に合わせる）
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ペインリサイズ（WezTerm の Leader+H/J/K/L に合わせる）
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ペインズーム（WezTerm の Ctrl+z に合わせる）
bind z resize-pane -Z

# 設定ファイルの再読み込み
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# ====================
# 見た目（Tokyo Night Moon + WezTerm風）
# ====================

# ステータスバーを上部に表示
set -g status-position top

# 更新間隔（秒）
set -g status-interval 5

# ステータスバー全体（背景を透過に）
set -g status-style "bg=default,fg=#828bb8"

# ステータスバー左側（セッション名をピル型で）
set -g status-left-length 40
set -g status-left "#{?client_prefix,#[fg=#82aaff]#[bg=default]#[fg=#1e2030]#[bg=#82aaff]#[bold]  #S #[fg=#82aaff]#[bg=default],#[fg=#3BC1A8]#[bg=default]#[fg=#1e2030]#[bg=#3BC1A8]#[bold]  #S #[fg=#3BC1A8]#[bg=default]} "

# ステータスバー右側（時刻をピル型で）
set -g status-right-length 50
set -g status-right "#[fg=#2f334d,bg=default]#[fg=#828bb8,bg=#2f334d]  %m/%d   %H:%M #[fg=#2f334d,bg=default]"

# ウィンドウ一覧の間隔
set -g window-status-separator ""

# ウィンドウ一覧（非アクティブ：ピル型）
setw -g window-status-format "#[fg=#2f334d,bg=default]#[fg=#545c7e,bg=#2f334d] #I  #W #[fg=#2f334d,bg=default] "

# ウィンドウ一覧（アクティブ：ティール強調ピル型）
setw -g window-status-current-format "#[fg=#005461,bg=default]#[fg=#c8d3f5,bg=#005461,bold] #I  #W #[fg=#005461,bg=default] "

# ペインの境界線
set -g pane-border-style "fg=#3b4261"
set -g pane-active-border-style "fg=#3BC1A8"

# メッセージ表示
set -g message-style "bg=#005461,fg=#c8d3f5"
