# ルーティング（設計対象判定）

## 判定ルール（短縮）

- 画面・UI・フォーム・入力項目・遷移・画面仕様 → **UI**
- エンドポイント・HTTP・REST・GraphQL・リクエスト/レスポンス → **API**
- テーブル・ER・インデックス・制約・マイグレーション → **DB**
- ジョブ・スケジュール・集計・ETL・再実行・バッチ → **Batch**
- 性能・SLO・監視・運用・セキュリティ・可用性 → **NFR**
- 迷う/複数混在 → **複合**（まず「何を1枚にしたいか」を質問）

## 読むべきテンプレ

| 設計対象 | 必読テンプレ | 追加で読む（必要時） |
|---|---|---|
| UI | `ui.md` | `nfr.md` |
| API | `api.md` | `db.md`, `nfr.md` |
| DB | `db.md` | `api.md`, `nfr.md` |
| Batch | `batch.md` | `db.md`, `nfr.md` |
| NFR | `nfr.md` | - |
| 複合 | 複数 | `question-bank.md` |

## 図（Mermaid）の使い分け

- **UI**: 画面遷移は「テキスト＋簡易図」程度。複雑な場合のみ Mermaid で補助
- **API**: 複雑な処理はシーケンス図（成功/失敗の片方だけでも可）
- **DB**: ER 代わりに「主要エンティティ関係（簡易）」をテキストで。必要なら Mermaid で補助
- **Batch**: ジョブフロー（入力→処理→出力）を簡易図で

## 先に質問して止める条件（例）

- 設計対象が曖昧（UI/API/DB/Batch を確定できない）
- 「既存を変更」なのか「新規」なのか不明
- 成功条件（何ができたらOKか）が不明
- 依存（外部IF/既存DB/既存API）があるのに情報がない

